# Story 1.1: Project Repository & Monorepo Setup

## Status
**Draft**

## Story

**As a** developer,
**I want** the monorepo structure initialized with frontend and backend projects configured,
**so that** the team can begin development with proper tooling and build processes in place.

## Acceptance Criteria

1. Git repository is created with monorepo structure (frontend/, backend/, docker-compose.yml, README.md)
2. Frontend project is initialized with React 18+, TypeScript, Vite, and includes basic project structure (src/, public/, tsconfig.json, package.json)
3. Backend project is initialized with Spring Boot 3.x, Java 17+, and includes basic project structure (src/main/java, src/main/resources, pom.xml or build.gradle)
4. README.md includes setup instructions for both frontend and backend
5. .gitignore is configured to exclude node_modules, target/, build artifacts, and IDE files
6. Both projects can be built successfully (npm run build for frontend, mvn clean install for backend)
7. Development server scripts are documented (npm run dev for frontend, IDE or mvn spring-boot:run for backend)

## Tasks / Subtasks

- [ ] **Task 1: Initialize Git repository and monorepo structure** (AC: 1)
  - [ ] Create root directory `hackathon-workflow-2025/`
  - [ ] Initialize git repository: `git init`
  - [ ] Create monorepo folder structure: `frontend/`, `backend/`
  - [ ] Create root-level files: `docker-compose.yml`, `README.md`, `.gitignore`, `.env.example`

- [ ] **Task 2: Set up frontend project with React + TypeScript + Vite** (AC: 2, 6, 7)
  - [ ] Navigate to `frontend/` directory
  - [ ] Initialize Vite project with React + TypeScript template: `npm create vite@5.0.12 . -- --template react-ts`
  - [ ] Install exact dependencies from tech stack:
    - React 18.2.0
    - TypeScript 5.3.3
    - Redux Toolkit 2.1.0
    - Material-UI 5.15.7
    - React Hook Form 7.49.3
    - React Testing Library 14.1.2
    - Jest 29.7.0
    - ESLint 8.56.0
    - Prettier 3.2.4
  - [ ] Create project structure following source tree:
    - `src/components/` (common/, auth/, dashboard/, templates/, workflows/, tasks/)
    - `src/features/` (auth/, users/, templates/, workflows/, tasks/, dashboard/)
    - `src/api/generated/` (for OpenAPI client)
    - `src/hooks/`, `src/utils/`, `src/types/`
    - `src/App.tsx`, `src/main.tsx`, `src/store.ts`
    - `public/`
  - [ ] Configure `tsconfig.json` for strict TypeScript
  - [ ] Configure `vite.config.ts` with appropriate settings
  - [ ] Add npm scripts to `package.json`: `dev`, `build`, `test`, `test:watch`, `test:coverage`
  - [ ] Create `frontend/Dockerfile` using nginx:1.25-alpine base
  - [ ] Verify frontend builds successfully: `npm run build`

- [ ] **Task 3: Set up backend project with Spring Boot + Java 17** (AC: 3, 6, 7)
  - [ ] Navigate to `backend/` directory
  - [ ] Initialize Spring Boot project using Spring Initializr with:
    - Spring Boot 3.2.2
    - Java 17
    - Maven 3.9.6
    - Dependencies: Spring Web, Spring Data JPA, Spring Security, Liquibase, PostgreSQL Driver, Lombok, Spring Boot Actuator, Validation
  - [ ] Configure `pom.xml` with exact versions from tech stack:
    - Spring Boot 3.2.2
    - PostgreSQL JDBC 42.7.1
    - Liquibase 4.25.1
    - Lombok 1.18.30
    - SpringDoc OpenAPI 2.3.0
    - JUnit 5.10.1
    - Mockito 5.8.0
    - TestContainers 1.19.3
  - [ ] Create Java package structure following source tree:
    - `com.magnab.employeelifecycle.config/`
    - `com.magnab.employeelifecycle.controller/`
    - `com.magnab.employeelifecycle.service/`
    - `com.magnab.employeelifecycle.repository/`
    - `com.magnab.employeelifecycle.entity/`
    - `com.magnab.employeelifecycle.dto/` (request/, response/)
    - `com.magnab.employeelifecycle.enums/`
    - `com.magnab.employeelifecycle.exception/`
  - [ ] Create `src/main/resources/application.yml` with placeholders for database, SMTP config
  - [ ] Create `src/main/resources/db/changelog/` directory for Liquibase
  - [ ] Create `src/test/resources/application-test.yml` for test configuration
  - [ ] Create `backend/Dockerfile` using openjdk:17-slim base
  - [ ] Create main application class: `EmployeeLifecycleApplication.java`
  - [ ] Verify backend builds successfully: `mvn clean install`

- [ ] **Task 4: Configure .gitignore for monorepo** (AC: 5)
  - [ ] Add Node.js exclusions: `node_modules/`, `dist/`, `coverage/`, `.env`
  - [ ] Add Java exclusions: `target/`, `*.class`, `.mvn/`, `*.jar`, `*.war`
  - [ ] Add IDE exclusions: `.idea/`, `.vscode/`, `*.iml`, `.DS_Store`
  - [ ] Add environment file exclusions: `.env` (but keep `.env.example`)

- [ ] **Task 5: Create comprehensive README.md** (AC: 4, 7)
  - [ ] Add project title: "Employee Lifecycle Management System"
  - [ ] Add prerequisites section (Docker, Node.js 20.11.0, Java 17, Maven 3.9.6)
  - [ ] Add setup instructions:
    - Clone repository
    - Copy `.env.example` to `.env` and configure
    - Frontend setup: `cd frontend && npm install && npm run dev`
    - Backend setup: `cd backend && mvn clean install && mvn spring-boot:run`
  - [ ] Add development scripts documentation:
    - Frontend: `npm run dev` (dev server), `npm run build` (production build), `npm test` (run tests)
    - Backend: `mvn spring-boot:run` (dev server), `mvn clean install` (build), `mvn test` (run tests)
  - [ ] Add Docker Compose instructions (to be fully implemented in Story 1.2)
  - [ ] Add project structure overview

- [ ] **Task 6: Create docker-compose.yml placeholder** (AC: 1)
  - [ ] Create basic `docker-compose.yml` with version 3.8
  - [ ] Add placeholder service definitions (to be completed in Story 1.2):
    - frontend (nginx)
    - backend (Spring Boot)
    - postgres (PostgreSQL 17.2)
  - [ ] Add comment indicating full implementation in Story 1.2

- [ ] **Task 7: Create .env.example template** (AC: 1)
  - [ ] Add database configuration placeholders:
    - `DB_PASSWORD=your_secure_password_here`
  - [ ] Add SMTP configuration placeholders:
    - `SMTP_PASSWORD=gmail_app_specific_password`
  - [ ] Add comments explaining each variable

- [ ] **Task 8: Verify complete monorepo setup**
  - [ ] Run `git status` to verify all files are tracked (except .env)
  - [ ] Run `npm run build` in frontend/ to verify successful build
  - [ ] Run `mvn clean install` in backend/ to verify successful build
  - [ ] Verify README.md is complete and accurate
  - [ ] Verify .gitignore excludes appropriate files

## Dev Notes

### Project Structure Overview
[Source: architecture/source-tree.md]

The monorepo follows this exact structure:
```
hackathon-workflow-2025/
├── frontend/                           # React + TypeScript application
│   ├── src/
│   │   ├── components/                 # Reusable UI components
│   │   │   ├── common/                 # Buttons, inputs, modals
│   │   │   ├── auth/                   # Login, session management
│   │   │   ├── dashboard/              # Kanban board, filters
│   │   │   ├── templates/              # Template builder, library
│   │   │   ├── workflows/              # Workflow detail, initiation
│   │   │   └── tasks/                  # Task completion forms, queue
│   │   ├── features/                   # Redux slices
│   │   │   ├── auth/                   # authSlice, authApi
│   │   │   ├── users/                  # usersSlice, usersApi
│   │   │   ├── templates/              # templatesSlice, templatesApi
│   │   │   ├── workflows/              # workflowsSlice, workflowsApi
│   │   │   ├── tasks/                  # tasksSlice, tasksApi
│   │   │   └── dashboard/              # dashboardSlice, dashboardApi
│   │   ├── api/                        # OpenAPI generated client
│   │   │   └── generated/              # Auto-generated TypeScript client
│   │   ├── hooks/                      # Custom React hooks
│   │   ├── utils/                      # Utility functions
│   │   ├── types/                      # TypeScript type definitions
│   │   ├── App.tsx                     # Main app component
│   │   ├── main.tsx                    # Entry point
│   │   └── store.ts                    # Redux store configuration
│   ├── public/                         # Static assets
│   ├── index.html
│   ├── package.json
│   ├── tsconfig.json
│   ├── vite.config.ts
│   └── Dockerfile                      # Frontend container (nginx)
│
├── backend/                            # Spring Boot + Java application
│   ├── src/
│   │   ├── main/
│   │   │   ├── java/com/magnab/employeelifecycle/
│   │   │   │   ├── config/             # Configuration classes
│   │   │   │   ├── controller/         # REST controllers
│   │   │   │   ├── service/            # Business logic
│   │   │   │   ├── repository/         # Spring Data JPA repositories
│   │   │   │   ├── entity/             # JPA entities
│   │   │   │   ├── dto/                # Data Transfer Objects
│   │   │   │   │   ├── request/        # Request DTOs
│   │   │   │   │   └── response/       # Response DTOs
│   │   │   │   ├── enums/              # Enumerations
│   │   │   │   ├── exception/          # Custom exceptions
│   │   │   │   └── EmployeeLifecycleApplication.java
│   │   │   └── resources/
│   │   │       ├── db/
│   │   │       │   └── changelog/
│   │   │       │       └── db.changelog-master.yaml
│   │   │       ├── templates/          # Thymeleaf email templates
│   │   │       └── application.yml     # Spring Boot configuration
│   │   └── test/
│   │       ├── java/com/magnab/employeelifecycle/
│   │       │   ├── service/            # Service unit tests
│   │       │   ├── controller/         # Controller integration tests
│   │       │   └── repository/         # Repository tests
│   │       └── resources/
│   │           └── application-test.yml
│   ├── pom.xml                         # Maven configuration
│   └── Dockerfile                      # Backend container
│
├── docker-compose.yml                  # Multi-container orchestration
├── .env.example                        # Environment variables template
├── .gitignore
└── README.md                           # Setup instructions
```

### Technology Stack - Exact Versions (CRITICAL)
[Source: architecture/tech-stack.md]

**IMPORTANT:** All versions must match exactly as specified. No ranges, no "latest" tags.

**Frontend:**
- React: 18.2.0
- TypeScript: 5.3.3
- Node.js: 20.11.0 LTS
- Vite: 5.0.12
- Redux Toolkit: 2.1.0 (includes RTK Query)
- Material-UI (MUI): 5.15.7
- React Hook Form: 7.49.3
- React Testing Library: 14.1.2
- Jest: 29.7.0
- ESLint: 8.56.0
- Prettier: 3.2.4
- npm: 10.2.4

**Backend:**
- Java: 17 LTS
- Spring Boot: 3.2.2
- Maven: 3.9.6
- PostgreSQL JDBC: 42.7.1
- Liquibase: 4.25.1
- Lombok: 1.18.30
- SpringDoc OpenAPI: 2.3.0
- JUnit 5: 5.10.1
- Mockito: 5.8.0
- TestContainers: 1.19.3
- HikariCP: 5.1.0 (connection pooling)
- Spring Security: 6.2.1

**Deployment:**
- Docker: 24.0.7+
- Docker Compose: 2.23.3+
- nginx: 1.25-alpine
- PostgreSQL: 17.2-alpine
- OpenJDK: 17-slim

**Version Pinning Strategy:**
[Source: architecture/tech-stack.md#version-pinning-strategy]
- Pin exact versions (no ranges like ^, ~)
- Update only for critical security fixes
- No automatic updates (dependabot disabled)
- No `latest` tags in Dockerfiles

### Package Management & Base Package
[Source: architecture/tech-stack.md]

**Backend Base Package:** `com.magnab.employeelifecycle`

All Java classes must be under this package hierarchy:
- `com.magnab.employeelifecycle.config`
- `com.magnab.employeelifecycle.controller`
- `com.magnab.employeelifecycle.service`
- `com.magnab.employeelifecycle.repository`
- `com.magnab.employeelifecycle.entity`
- `com.magnab.employeelifecycle.dto.request`
- `com.magnab.employeelifecycle.dto.response`
- `com.magnab.employeelifecycle.enums`
- `com.magnab.employeelifecycle.exception`

### Coding Standards
[Source: architecture/coding-standards.md]

**Critical Rules:**
1. Never log sensitive data (passwords, tokens, PII)
2. Always use DTOs at API boundaries (never expose entities)
3. All database queries via repositories (no direct EntityManager)
4. Transactional at service layer (@Transactional on services, not controllers)
5. Validate all inputs (use @Valid and Jakarta Bean Validation)
6. Use constructor injection (immutable dependencies with final fields)
7. Lombok for entities only (don't overuse @Data on DTOs)

**Naming Conventions:**
- Entities: Singular nouns (User, WorkflowTemplate)
- Repositories: EntityRepository pattern (UserRepository)
- Services: EntityService pattern (UserService)
- Controllers: EntityController pattern (UserController)
- DTOs: ActionEntityRequest/Response (CreateUserRequest, UserResponse)

**Code Quality Tools:**
- Frontend: ESLint + Prettier (enforced) - configuration required in this story
- Backend: Checkstyle (optional but recommended)

### Docker Infrastructure Preview
[Source: architecture/infrastructure-and-deployment.md]

While full Docker setup is in Story 1.2, this story creates the initial `docker-compose.yml` placeholder and Dockerfiles:

**docker-compose.yml structure (placeholder):**
```yaml
version: '3.8'
services:
  postgres:
    image: postgres:17.2-alpine
    # Full config in Story 1.2

  backend:
    build: ./backend
    # Full config in Story 1.2

  frontend:
    build: ./frontend
    # Full config in Story 1.2
```

**Backend Dockerfile (to be created):**
- Base image: `openjdk:17-slim`
- Will include Maven build and JAR execution
- Full implementation details in Story 1.2

**Frontend Dockerfile (to be created):**
- Base image: `nginx:1.25-alpine`
- Multi-stage build (Node.js for build, nginx for serving)
- nginx reverse proxy configuration
- Full implementation details in Story 1.2

### Environment Configuration
[Source: architecture/infrastructure-and-deployment.md]

**`.env.example` must include:**
```
# Database Configuration
DB_PASSWORD=secure_password_here

# SMTP Configuration (Gmail)
SMTP_PASSWORD=gmail_app_specific_password
```

**NOTE:** The actual `.env` file must NOT be committed to git. Add to .gitignore.

### Spring Boot Configuration Structure
[Source: architecture/tech-stack.md, architecture/infrastructure-and-deployment.md]

**application.yml** (basic structure for this story):
```yaml
spring:
  application:
    name: employee-lifecycle-management
  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:employee_lifecycle}
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD}
  jpa:
    hibernate:
      ddl-auto: none  # Liquibase handles schema
    properties:
      hibernate:
        format_sql: true
  liquibase:
    enabled: true
    change-log: classpath:db/changelog/db.changelog-master.yaml
  mail:
    host: ${SMTP_HOST:smtp.gmail.com}
    port: ${SMTP_PORT:587}
    username: ${SMTP_USERNAME:ctrlalteliteg@gmail.com}
    password: ${SMTP_PASSWORD}
    properties:
      mail.smtp.auth: true
      mail.smtp.starttls.enable: true

management:
  endpoints:
    web:
      exposure:
        include: health

server:
  port: 8080
```

### Maven pom.xml Key Dependencies

Key Spring Boot starters needed:
- `spring-boot-starter-web`
- `spring-boot-starter-data-jpa`
- `spring-boot-starter-security`
- `spring-boot-starter-validation`
- `spring-boot-starter-mail`
- `spring-boot-starter-actuator`
- `spring-boot-starter-test` (test scope)

Additional dependencies:
- `postgresql` (runtime)
- `liquibase-core`
- `lombok` (provided)
- `springdoc-openapi-starter-webmvc-ui` 2.3.0
- `testcontainers` (test scope)

### Key Organizational Principles
[Source: architecture/source-tree.md]

1. **Monorepo structure** - Single repository, clear frontend/backend separation
2. **Package by feature** - Backend organized by domain (not by layer)
3. **Component-based frontend** - Reusable components, Redux feature slices
4. **Generated code isolation** - OpenAPI client in dedicated `api/generated/` folder
5. **Test parallelism** - Tests mirror source structure

### No Previous Story Context
This is the first story in the project. No previous implementation context exists.

## Testing

### Testing Framework Setup
[Source: architecture/test-strategy.md]

**IMPORTANT:** This story sets up the PROJECT STRUCTURE ONLY. Comprehensive testing framework configuration (Jest, React Testing Library, JUnit, Mockito, TestContainers) is implemented in **Story 1.8: Testing Framework Setup**.

For this story, minimal testing is required:

**Frontend:**
- Ensure `package.json` is created with placeholder for test scripts
- No actual test configuration required yet (Story 1.8)

**Backend:**
- Ensure Maven `pom.xml` includes test dependencies
- Ensure `src/test/` directory structure is created
- No actual test configuration required yet (Story 1.8)

**Build Verification:**
- Frontend: `npm run build` must succeed (no tests run during build yet)
- Backend: `mvn clean install` must succeed (basic compilation, no tests required yet)

**Test Directory Structure (to be created):**
Frontend:
- `frontend/src/__tests__/` (placeholder, tests in Story 1.8)

Backend:
- `backend/src/test/java/com/magnab/employeelifecycle/service/`
- `backend/src/test/java/com/magnab/employeelifecycle/controller/`
- `backend/src/test/java/com/magnab/employeelifecycle/repository/`
- `backend/src/test/resources/application-test.yml`

**Coverage Goals (for later stories):**
[Source: architecture/test-strategy.md]
- Service layer: 80% unit test coverage
- Controllers: Happy path + critical errors (integration tests)
- UI: Component tests for forms and complex logic

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-30 | 1.0 | Initial story creation | Scrum Master - Bob |

## Dev Agent Record

### Agent Model Used
_To be populated by Dev Agent_

### Debug Log References
_To be populated by Dev Agent_

### Completion Notes
_To be populated by Dev Agent_

### File List
_To be populated by Dev Agent_

## QA Results
_To be populated by QA Agent_
